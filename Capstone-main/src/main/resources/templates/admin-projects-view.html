<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>View Project - OpportuGrow</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --success-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      --warning-gradient: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
      --danger-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
      --dark-gradient: linear-gradient(135deg, #141e30 0%, #243b55 100%);
      --card-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      --hover-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
      --light-bg: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--light-bg);
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0;
    }

    .my-5 {
      margin-top: 3rem !important;
      margin-bottom: 3rem !important;
    }

    /* Page Header */
    .mb-4 {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
      backdrop-filter: blur(10px);
      padding: 25px 30px;
      border-radius: 20px;
      box-shadow: var(--card-shadow);
      border: 1px solid rgba(226, 232, 240, 0.5);
      position: relative;
      overflow: hidden;
      margin-bottom: 30px !important;
    }

    .mb-4::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
      background-size: 300% 100%;
      animation: gradientMove 8s ease infinite;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .btn-outline-primary {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(102, 126, 234, 0.2);
      color: #667eea;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: 500;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
    }

    .btn-outline-primary:hover {
      background: rgba(102, 126, 234, 0.1);
      border-color: #667eea;
      color: #667eea;
      transform: translateY(-2px);
      text-decoration: none;
    }

    .mt-3 {
      margin-top: 1.5rem !important;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      background: var(--dark-gradient);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 10px;
      letter-spacing: -0.5px;
    }

    .text-muted {
      color: #64748b !important;
      font-size: 1.1rem;
    }

    /* Project Card */
    .card {
      background: white;
      border-radius: 24px !important;
      box-shadow: var(--card-shadow);
      padding: 40px;
      position: relative;
      overflow: hidden;
      border: none !important;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--hover-shadow);
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gradient);
    }

    .shadow-sm {
      box-shadow: none !important;
    }

    .p-4 {
      padding: 40px !important;
    }

    /* Section Headers */
    h4 {
      font-size: 1.4rem;
      font-weight: 700;
      color: #1e293b;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    h4 i {
      color: #667eea;
      font-size: 1.5rem;
    }

    .mt-4 {
      margin-top: 2rem !important;
    }

    hr {
      margin: 20px 0;
      border: none;
      height: 2px;
      background: linear-gradient(to right, #f1f5f9, #e2e8f0, #f1f5f9);
    }

    /* Project Details */
    p {
      margin-bottom: 15px;
      font-size: 1.05rem;
      line-height: 1.6;
    }

    strong {
      font-weight: 600;
      color: #1e293b;
      min-width: 160px;
      display: inline-block;
    }

    p > span:not(.badge) {
      color: #475569;
      font-weight: 500;
    }

    /* Status Badge */
    span[th\\:text="\$\{project.status\}"] {
      padding: 8px 16px;
      border-radius: 50px;
      font-weight: 600;
      font-size: 0.85rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-left: 10px;
      text-transform: uppercase;
    }

    span[th\\:text="PENDING"],
    span[th\\:text="\$\{project.status\}"][th\\:if="\$\{project.status\} == 'PENDING'"] {
      background: linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, rgba(245, 158, 11, 0.1) 100%);
      color: #f59e0b;
      border: 1px solid rgba(245, 158, 11, 0.2);
    }

    span[th\\:text="APPROVED"],
    span[th\\:text="\$\{project.status\}"][th\\:if="\$\{project.status\} == 'APPROVED'"] {
      background: linear-gradient(135deg, rgba(67, 233, 123, 0.1) 0%, rgba(56, 249, 215, 0.1) 100%);
      color: #22c55e;
      border: 1px solid rgba(34, 197, 94, 0.2);
    }

    span[th\\:text="REJECTED"],
    span[th\\:text="\$\{project.status\}"][th\\:if="\$\{project.status\} == 'REJECTED'"] {
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%);
      color: #ef4444;
      border: 1px solid rgba(239, 68, 68, 0.2);
    }

    /* Media Section */
    .img-fluid {
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }

    .img-fluid:hover {
      transform: scale(1.02);
    }

    .rounded {
      border-radius: 12px !important;
    }

    .mb-3 {
      margin-bottom: 1rem !important;
    }

    .btn-outline-secondary {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(148, 163, 184, 0.2);
      color: #64748b;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: 500;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
    }

    .btn-outline-secondary:hover {
      background: rgba(148, 163, 184, 0.1);
      border-color: #94a3b8;
      color: #64748b;
      transform: translateY(-2px);
      text-decoration: none;
    }

    /* Gallery */
    .row {
      display: flex;
      flex-wrap: wrap;
      margin-right: -15px;
      margin-left: -15px;
    }

    .col-md-3 {
      flex: 0 0 25%;
      max-width: 25%;
      padding: 15px;
    }

    @media (max-width: 768px) {
      .col-md-3 {
        flex: 0 0 50%;
        max-width: 50%;
      }
    }

    @media (max-width: 576px) {
      .col-md-3 {
        flex: 0 0 100%;
        max-width: 100%;
      }
    }

    /* Funding Progress Bar */
    .funding-progress {
      margin: 20px 0;
    }

    .progress-bar-container {
      background: #e2e8f0;
      height: 10px;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 10px;
    }

    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #43e97b, #38f9d7);
      border-radius: 10px;
      transition: width 0.6s ease;
    }

    .progress-text {
      display: flex;
      justify-content: space-between;
      font-size: 0.95rem;
      color: #64748b;
      margin-top: 5px;
    }

    /* Amount Styling */
    p strong + span {
      color: #1e293b;
      font-weight: 600;
    }

    /* Small text at bottom */
    .mt-3.text-muted {
      background: #f8fafc;
      padding: 15px;
      border-radius: 12px;
      border-left: 4px solid #667eea;
    }

    .mt-3.text-muted small {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.95rem;
    }

    /* Action Buttons - FIXED SECTION */
    .action-buttons {
      display: flex;
      gap: 15px;
      margin-top: 30px;
      padding-top: 30px;
      border-top: 1px solid #f1f5f9;
      justify-content: flex-end;
    }

    .btn-action {
      padding: 14px 28px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 1rem;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
      border: none;
      cursor: pointer;
      min-width: 150px;
      justify-content: center;
    }

    .btn-edit {
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      color: white;
      box-shadow: 0 5px 20px rgba(251, 191, 36, 0.3);
    }

    .btn-edit:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(251, 191, 36, 0.4);
    }

    .btn-delete {
      background: linear-gradient(135deg, #f87171 0%, #ef4444 100%);
      color: white;
      box-shadow: 0 5px 20px rgba(239, 68, 68, 0.3);
    }

    .btn-delete:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(239, 68, 68, 0.4);
    }

    /* Fix for the inline delete form */
    .delete-form {
      display: inline;
    }

    /* FIXED: Corrected delete button styling */
    .btn-view {
      background: transparent;
      border: none;
      color: #ef4444;
      font-size: 1.1rem;
      padding: 10px;
      border-radius: 8px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .btn-view:hover {
      background: rgba(239, 68, 68, 0.1);
      transform: translateY(-2px);
    }

    /* Delete Button Container */
    .delete-container {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 20px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 15px;
      }

      .container {
        padding: 0 15px;
      }

      h1 {
        font-size: 2rem;
      }

      .card {
        padding: 25px 20px !important;
      }

      .col-md-3 {
        flex: 0 0 50%;
        max-width: 50%;
      }

      .action-buttons {
        flex-direction: column;
        gap: 10px;
      }

      .btn-action {
        width: 100%;
        min-width: auto;
      }
    }

    @media (max-width: 576px) {
      .col-md-3 {
        flex: 0 0 100%;
        max-width: 100%;
      }

      .action-buttons {
        flex-direction: column;
      }

      .btn-action {
        width: 100%;
        justify-content: center;
      }
    }

    /* Add some spacing improvements */
    h5 {
      font-size: 1.2rem;
      font-weight: 600;
      color: #475569;
      margin-bottom: 15px;
    }

    /* Category Badge */
    p strong + span[th\\:text="\$\{project.category\}"] {
      padding: 6px 12px;
      background: #f1f5f9;
      border-radius: 8px;
      font-size: 0.9rem;
      margin-left: 10px;
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
    }
  </style>
</head>
<body>

<div class="container my-5">

  <!-- Page Header -->
  <div class="mb-4">
    <a href="/admin/projects" class="btn btn-outline-primary">
      <i class="bi bi-arrow-left"></i> Back to Projects
    </a>
    <h1 class="mt-3">Project Details</h1>
    <p class="text-muted">View all information about this project</p>
  </div>

  <!-- Project Card -->
  <div class="card shadow-sm p-4">

    <!-- Basic Information -->
    <h4><i class="bi bi-info-circle"></i> Basic Information</h4>
    <hr>
    <p><strong>Title:</strong> <span th:text="${project.title}">Project Title</span></p>
    <p><strong>Short Description:</strong> <span th:text="${project.shortDescription}">Short description here</span></p>
    <p><strong>Owner:</strong> <span th:text="${project.owner.name}">Owner Name</span></p>

    <!-- Detailed Description -->
    <h4 class="mt-4"><i class="bi bi-file-text"></i> Detailed Description</h4>
    <hr>
    <p th:text="${project.longDescription}">Long description here...</p>

    <!-- Category & Funding -->
    <h4 class="mt-4"><i class="bi bi-tags"></i> Category & Funding</h4>
    <hr>
    <p><strong>Category:</strong> <span th:text="${project.category}">Category</span></p>
    <p><strong>Funding Goal:</strong> $<span th:text="${project.fundingGoal}">0.00</span></p>
    <p><strong>Funding Duration:</strong> <span th:text="${project.fundingDuration}">30</span> days</p>
    <p><strong>Status:</strong> <span th:text="${project.status}">PENDING</span></p>
    <p><strong>Current Funding:</strong> $<span th:text="${project.currentFunding}">0.0</span></p>

    <!-- Media -->
    <h4 class="mt-4"><i class="bi bi-image"></i> Media</h4>
    <hr>
    <div th:if="${project.imageUrl}">
      <p><strong>Featured Image:</strong></p>
      <img th:src="${project.imageUrl}" class="img-fluid rounded mb-3" alt="Project Image">
    </div>
    <div th:if="${project.videoUrl}">
      <p><strong>Video:</strong></p>
      <a th:href="${project.videoUrl}" target="_blank" class="btn btn-outline-secondary">
        <i class="bi bi-play-circle"></i> Watch Video
      </a>
    </div>

    <!-- Gallery -->
    <div th:if="${project.galleryUrls}">
      <h5 class="mt-3">Gallery</h5>
      <div class="row">
        <div class="col-md-3 mb-3" th:each="imgUrl : ${project.galleryUrls}">
          <img th:src="${imgUrl}" class="img-fluid rounded" alt="Gallery Image">
        </div>
      </div>
    </div>

    <!-- Project Fees -->
    <h4 class="mt-4"><i class="bi bi-currency-dollar"></i> Fees</h4>
    <hr>
    <p><strong>Platform Fee:</strong> $<span th:text="${project.platformFee}">0.00</span></p>
    <p><strong>Processing Fee:</strong> $<span th:text="${project.processingFee}">0.00</span></p>
    <p><strong>Amount You Will Receive:</strong> $<span th:text="${project.amountYouWillReceive}">0.00</span></p>

    <!-- Created At -->
    <p class="mt-3 text-muted"><small>Created at: <span th:text="${#dates.format(project.createdAt, 'dd MMM yyyy HH:mm')}">Date</span></small></p>

  </div>

  <!-- Action Buttons - FIXED SECTION -->
  <div class="action-buttons">

    <form th:action="@{/admin/projects/delete/{id}(id=${project.id})}"
          method="post"
          class="delete-form"
          onsubmit="return confirm('Are you sure you want to delete this project? This action cannot be undone.');">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
      <button type="submit" class="btn-action btn-delete">
        <i class="bi bi-trash"></i> Delete Project
      </button>
    </form>
  </div>

</div>

</body>
</html>