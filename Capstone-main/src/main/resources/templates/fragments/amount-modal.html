<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>

<div th:fragment="amountModal">
    <style>
        .modal-content-custom {
            border-radius: 24px;
            border: none;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }
        .modal-header-custom {
            background: linear-gradient(135deg, #3498db 0%, #2ecc71 100%);
            padding: 25px;
            color: white;
            text-align: center;
            border-radius: 24px 24px 0 0;
        }
        .amount-input-wrapper {
            position: relative;
            margin: 20px 0;
        }
        .amount-input-wrapper input {
            font-size: 2.2rem;
            font-weight: 800;
            text-align: center;
            border: 2px solid #eee;
            border-radius: 16px;
            width: 100%;
            padding: 10px;
            color: #2c3e50;
        }
    </style>

    <div class="modal fade" id="amountModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" style="max-width: 400px;">
            <div class="modal-content modal-content-custom">
                <div class="modal-header-custom">
                    <h4 class="fw-bold mb-1" id="modalTitle">Contribution</h4>
                    <p class="mb-0 opacity-75">Enter the amount you wish to provide</p>
                </div>
                <form id="amountForm" method="get">
                    <div class="modal-body p-4">
                        <div class="amount-input-wrapper">
                            <input type="number" id="contributionAmount" name="amount" placeholder="0" min="1" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 p-3 fw-bold" style="border-radius: 12px; background: linear-gradient(135deg, #3498db 0%, #2ecc71 100%); border:none;">
                            Continue to Agreement <i class="fas fa-arrow-right ms-2"></i>
                        </button>
                    </div>
                </form>
                <div class="text-center pb-3">
                    <button type="button" class="btn btn-link btn-sm text-muted text-decoration-none" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openAmountModal(projectId, type) {
            const form = document.getElementById('amountForm');
            const modalTitle = document.getElementById('modalTitle');

            form.action = '/projects/' + projectId + '/agreement';

            if(type === 'LOAN') modalTitle.innerText = "Provide Loan";
            else if(type === 'FUND') modalTitle.innerText = "Invest Now";
            else modalTitle.innerText = "Donate Now";

            var myModal = new bootstrap.Modal(document.getElementById('amountModal'));
            myModal.show();
        }
    </script>
</div>

</body>
</html>